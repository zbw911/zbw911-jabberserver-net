<?xml version="1.0"?>
<configuration>
  <configSections>
    <section name="unity" type="Microsoft.Practices.Unity.Configuration.UnityConfigurationSection, Microsoft.Practices.Unity.Configuration" />
  </configSections>

  <connectionStrings>
    <add name="users" connectionString="ssss"/>
  </connectionStrings>

  <system.diagnostics>
    <trace autoflush="true">
      <listeners>
        <add name="Console" type="System.Diagnostics.ConsoleTraceListener"/>
      </listeners>
    </trace>
  </system.diagnostics>

  <unity xmlns="http://schemas.microsoft.com/practices/2010/unity">
    <assembly name="Jabber.Net.Server"/>
    <namespace name="Jabber.Net.Server.Connections"/>
    <namespace name="Jabber.Net.Server.Handlers"/>

    <container name="Jabber">

      <register type="IXmppListener" mapTo="TcpXmppListener" name="defaultListener">
        <lifetime type="singleton"/>
        <property name="ListenUri" value="tcp://0.0.0.0:5222"/>
      </register>

      <register type="XmppHandlerManager">
        <lifetime type="singleton"/>
      </register>

      <register type="XmppListenerManager">
        <lifetime type="singleton"/>
        <constructor>
          <param name="handlerManager" dependencyName="XmppHandlerManager"/>
        </constructor>
        <method name="AddListener">
          <param name="listener" dependencyName="defaultListener"/>
        </method>
      </register>
    </container>
  </unity>
</configuration>
